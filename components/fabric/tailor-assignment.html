<!-- Tailor Assignment Component -->
<div class="tailor-container">
    <!-- Header -->
    <div class="tailor-header">
        <h2><i class="fas fa-user-tie"></i> Tailor Assignment & Management</h2>
        <div class="header-actions">
            <button class="btn-secondary" onclick="tailorManager.viewAllAssignments()">
                <i class="fas fa-list"></i> All Assignments
            </button>
            <button class="btn-primary" onclick="tailorManager.showNewAssignment()">
                <i class="fas fa-plus"></i> New Assignment
            </button>
        </div>
    </div>

    <!-- Dashboard Stats -->
    <div class="tailor-stats">
        <div class="stat-card">
            <div class="stat-icon active">
                <i class="fas fa-tasks"></i>
            </div>
            <div class="stat-info">
                <h4>Active Tasks</h4>
                <p id="active-tasks">0</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon pending">
                <i class="fas fa-clock"></i>
            </div>
            <div class="stat-info">
                <h4>Pending</h4>
                <p id="pending-tasks">0</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon completed">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-info">
                <h4>Completed Today</h4>
                <p id="completed-today">0</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon deadline">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="stat-info">
                <h4>Due Today</h4>
                <p id="due-today">0</p>
            </div>
        </div>
    </div>

    <!-- Assignment Form -->
    <div class="assignment-form-card" id="assignment-form-card" style="display: none;">
        <div class="form-header">
            <h3><i class="fas fa-clipboard-list"></i> Create New Assignment</h3>
            <button class="btn-close" onclick="tailorManager.hideAssignmentForm()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <form id="tailor-assignment-form" onsubmit="tailorManager.submitAssignment(event)">
            <div class="form-grid">
                <!-- Cut Pieces Selection -->
                <div class="form-section">
                    <h4>Select Cut Pieces</h4>
                    <div class="cut-pieces-selector">
                        <input type="text" id="search-cut-pieces" 
                               placeholder="Search by cutting ID or fabric..." 
                               onkeyup="tailorManager.searchCutPieces()">
                        <div id="available-cut-pieces" class="pieces-list">
                            <!-- Available cut pieces will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Tailor Selection -->
                <div class="form-section">
                    <h4>Assign to Tailor</h4>
                    <div class="tailor-selector">
                        <select id="tailor-select" name="tailorId" required>
                            <option value="">Select Tailor</option>
                            <!-- Tailor options will be loaded -->
                        </select>
                        <div id="tailor-info" class="tailor-details" style="display: none;">
                            <p><strong>Current Load:</strong> <span id="tailor-load">0</span> tasks</p>
                            <p><strong>Skill Level:</strong> <span id="tailor-skill">-</span></p>
                            <p><strong>Completion Rate:</strong> <span id="tailor-rate">-</span></p>
                        </div>
                    </div>
                </div>

                <!-- Assignment Details -->
                <div class="form-section full-width">
                    <h4>Assignment Details</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="product-type">Product Type *</label>
                            <select id="product-type" name="productType" required>
                                <option value="">Select Product</option>
                                <option value="Shirt">Shirt</option>
                                <option value="Pant">Pant</option>
                                <option value="Dress">Dress</option>
                                <option value="Suit">Suit</option>
                                <option value="Jacket">Jacket</option>
                                <option value="Skirt">Skirt</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="quantity-assign">Quantity *</label>
                            <input type="number" id="quantity-assign" name="quantity" 
                                   required min="1" placeholder="Number of pieces">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="deadline">Deadline *</label>
                            <input type="datetime-local" id="deadline" name="deadline" required>
                        </div>
                        <div class="form-group">
                            <label for="priority">Priority *</label>
                            <select id="priority" name="priority" required>
                                <option value="normal">Normal</option>
                                <option value="high">High</option>
                                <option value="urgent">Urgent</option>
                                <option value="low">Low</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="rate-per-piece">Rate per Piece (â‚¹)</label>
                            <input type="number" id="rate-per-piece" name="ratePerPiece" 
                                   min="0" step="0.01" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label for="special-instructions">Special Instructions</label>
                            <textarea id="special-instructions" name="notes" rows="2"
                                      placeholder="Any special requirements..."></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-actions">
                <button type="button" class="btn-secondary" onclick="tailorManager.resetForm()">
                    <i class="fas fa-redo"></i> Reset
                </button>
                <button type="submit" class="btn-primary">
                    <i class="fas fa-check"></i> Assign Task
                </button>
            </div>
        </form>
    </div>

    <!-- Active Assignments -->
    <div class="assignments-grid">
        <div class="assignments-section">
            <h3><i class="fas fa-spinner fa-pulse"></i> In Progress</h3>
            <div id="in-progress-assignments" class="assignment-cards">
                <!-- Assignment cards will be loaded here -->
            </div>
        </div>

        <div class="assignments-section">
            <h3><i class="fas fa-clock"></i> Upcoming Deadlines</h3>
            <div id="upcoming-deadlines" class="assignment-cards">
                <!-- Deadline cards will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Assignment Table -->
    <div class="assignment-table-card">
        <div class="table-header">
            <h3><i class="fas fa-table"></i> All Assignments</h3>
            <div class="table-filters">
                <select id="status-filter" onchange="tailorManager.filterAssignments()">
                    <option value="all">All Status</option>
                    <option value="assigned">Assigned</option>
                    <option value="in_progress">In Progress</option>
                    <option value="completed">Completed</option>
                    <option value="delayed">Delayed</option>
                </select>
                <select id="tailor-filter" onchange="tailorManager.filterAssignments()">
                    <option value="all">All Tailors</option>
                    <!-- Tailor options will be loaded -->
                </select>
                <input type="date" id="date-filter" onchange="tailorManager.filterAssignments()">
            </div>
        </div>

        <table id="assignments-table">
            <thead>
                <tr>
                    <th>Assignment ID</th>
                    <th>Tailor</th>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Deadline</th>
                    <th>Priority</th>
                    <th>Progress</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="assignments-tbody">
                <!-- Assignment rows will be loaded here -->
            </tbody>
        </table>
    </div>
</div>

<!-- Update Progress Modal -->
<div id="progress-modal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="close" onclick="tailorManager.closeProgressModal()">&times;</span>
        <h3>Update Progress</h3>
        <form id="progress-form" onsubmit="tailorManager.updateProgress(event)">
            <input type="hidden" id="progress-assignment-id">
            <div class="form-group">
                <label for="completed-quantity">Completed Quantity</label>
                <input type="number" id="completed-quantity" required min="0">
            </div>
            <div class="form-group">
                <label for="progress-status">Status</label>
                <select id="progress-status">
                    <option value="in_progress">In Progress</option>
                    <option value="completed">Completed</option>
                    <option value="delayed">Delayed</option>
                </select>
            </div>
            <div class="form-group">
                <label for="progress-notes">Notes</label>
                <textarea id="progress-notes" rows="3"></textarea>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn-primary">Update</button>
            </div>
        </form>
    </div>
</div>